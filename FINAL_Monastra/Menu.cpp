#include "Menu.h"

#include "Utilities.h"

#include "Game.h"
#include "Credits.h"

int options = 0;

ConsoleData consoleDataMenu;

void GetInput(Screen& currentScreen);

void InitMenu()
{


	consoleDataMenu.hwnd = GetStdHandle(STD_OUTPUT_HANDLE);
	GetConsoleCursorInfo(GetStdHandle(STD_OUTPUT_HANDLE), &consoleDataMenu.cci);
	consoleDataMenu.cci.bVisible = 0;
	SetConsoleCursorInfo(GetStdHandle(STD_OUTPUT_HANDLE), &consoleDataMenu.cci);

	SetConsoleSize(consoleDataMenu, 1);

	SetConsoleFont(16);
}

void MenuUpdate(Screen& currentScreen)
{
	GetInput(currentScreen);
}

void MenuDrawing()
{
	SetConsoleCursorPosition(consoleDataMenu.hwnd, { 0,0 });
	cout << "                                                                                                    " << endl;
	cout << "                                                                                                    " << endl;
	cout << "                                                         -+#######+                                 " << endl;
	cout << "                                                      +#+-.-+++--+++##+++-                          " << endl;
	cout << "                                                    ##.----.....-#-..---.-+#+                       " << endl;
	cout << "                                                  -+--....---------+---.-+++-+#+                    " << endl;
	cout << "                                               -+#-.--..----++++----------------+#-                 " << endl;
	cout << "                                              ##+-...----##+----##+-------------..+#                " << endl;
	cout << "                                             +##-.-----+#-.+#+...#--------+-----...-#-              " << endl;
	cout << "                                             ##-..----+##..+##+..+-------++---+++----#+             " << endl;
	cout << "                                           -#+..------+########.-+-------#++++--------++            " << endl;
	cout << "                                         +#-...-------+########+#-------#+----++------+#+           " << endl;
	cout << "                                        #-..-.....-----+######+--------#+--+++--++--+--+#-          " << endl;
	cout << "                                       #-.---------------------#+----+#+++-----+++#--+--+#          " << endl;
	cout << "                                       #--------+#----------##+-----#++##--+++----++---++#+         " << endl;
	cout << "                                        +--------+------+##+-----+##-   +#-------+++--+++##         " << endl;
	cout << "                                        #######++---++##+------+#+...    +#-+++----++--+++#-        " << endl;
	cout << "          -######+-....                 +++######+##++------+##-.....     #-.---...-+----+#-        " << endl;
	cout << "          -#-.------+#+                 #+#++#+++-#+---++##+-........     #+-------++--+++#-        " << endl;
	cout << "          -#----------++#          ##   #+#    -+###++-                   #+.......++-++++#         " << endl;
	cout << "          .#+---+++-+-+++#+..###   -#+#++##                              -#-......-+-++++#+         " << endl;
	cout << "           -#----++++++++++--+++##   +####                               +#---....-+--+++#-         " << endl;
	cout << "            +#--+++++##++++##++##-                                      ++......-++---++##          " << endl;
	cout << "             +#++++++++###+##+##-                                      #+.......-+--+++##           " << endl;
	cout << "               +###+###########-                                     -#-----...-+---+###            " << endl;
	cout << "                 -+#########+#+                                    -#+.......-++---++##             " << endl;
	cout << "              -+++++-.....-++#--+##########+-                     ##+-.......-#---++##              " << endl;
	cout << "         -##+---..---++####+###++-+++++++----##-               -#+......--.-++--++###               " << endl;
	cout << "       ##-.---++++++############++++++++++++++--#+           -##-........-+#---++##+                " << endl;
	cout << "      #-.--...-+++++++++++++++++++++++++++++++++-+#-       -#+....-+....-++--+++##-                 " << endl;
	cout << "    #+.--.....-++++++++++++++++++++++++++++++++#+--#-    -#+.........---+---+++##                   " << endl;
	cout << "   #+.-+.....-++++++++++++++++++++++++++++++++####++#   +#...--.....--++--++++#+                    " << endl;
	cout << "  +#.-++-----+++++++++++++++++++++++++++++++++#####+##.#+.......+-.--+---++++#-                     " << endl;
	cout << "  #.-+++++...-+++++++++++++++++++++++++++++++++####++##-.........-+++----+++#-                      " << endl;
	cout << " ++.+++++++--++++++++++++++++++++++++++++++++++#####+##--.......---#+--++++#+                       " << endl;
	cout << " #+.+++++++++++++++++++++++++++++++++++++++++++#####+##....++..---++---+++##                        " << endl;
	cout << " #--++++++++++++++++++++++++++++++++++++++++++######+##........--+++---+++##                        " << endl;
	cout << " ++.++++++++++++++++++++++++++++++++++++++++++######+##.......----++--++++##             +##+-      " << endl;
	cout << " +#.+++++++++++++++++++++++++++++++++++++++++#######+#+.......----++---++++#+--+------...--..-#+    " << endl;
	cout << " -#--++++++++++++++++++++++++++++++++++++++++######+##++......--++++--------+#++++++++---..+++-+#   " << endl;
	cout << "  +#-++++++++++++++++++++++++++++++++++++++########+#+--.....-----+++----+++---------+---------.+#  " << endl;
	cout << "   #+-++++++++++++++++++++++++++++++++++++########+##----.....-----+++---------..--++++---------.#- " << endl;
	cout << "    #++++++++++++++++++++++++++++++++++##########++#+-----...------++++--+---------------+++++-+-#- " << endl;
	cout << "    -#-+++++++++++++++++++++++++++++############++##+-----------++---++++---+++---+++----++++#++##  " << endl;
	cout << "     -#+++#++++++++++++++++++#####################+#+-+++++++++---+++-+++##++++--------++++##++##   " << endl;
	cout << "       ##+####################################+##  +#+----------++++----+++++++##+++++####++++##    " << endl;
	cout << "        +#+##################################+##+   +##+++++++++--++------+++++++++++++++++++#+     " << endl;
	cout << "         -##+###############################+##+     +##+--------++------++----++#++++++--###       " << endl;
	cout << "          -###+###########################+###++       ####++--+++-------++------+--++####+-        " << endl;
	cout << "           ++####+++++++######++++####++####+++         +++########++++++#+###########+++           " << endl;
	cout << "            ++++########++++++###########+++             ++++++++++++++++++++++++++++++             " << endl;
	cout << "                                                                                                    " << endl;
	cout << "                 USE THE KEY 'A' AND THE KEY 'D' TO SELECT AN OPTION, THEN USE ENTER                " << endl;

	if (options == 0)
	{
		cout << "                        PLAY<<                   CREDITS                  EXIT                      " << endl;
	}
	else if (options == 1)
	{
		cout << "                        PLAY                     CREDITS<<                EXIT                      " << endl;
	}
	else if (options == 2)
	{
		cout << "                        PLAY                     CREDITS                  EXIT<<                    " << endl;
	}
}
void GetInput(Screen& currentScreen)
{
	if (_kbhit())
	{
		char input = toupper(_getch());

		if (input == 'D' || input == 'A' || input == (char)KEY_ENTER)
		{
			switch (input)
			{
			case 'D':
				options++;

				if (options > 2)
				{
					options = 2;
				}

				break;
			case 'A':
				options--;

				if (options < 0)
				{
					options = 0;
				}
				break;
			case (char)KEY_ENTER:

				if (options == 0)
				{
					system("cls");
					currentScreen = Screen::Game;
					InitGame();
				}
				else if (options == 1)
				{
					system("cls");
					currentScreen = Screen::Credits;
				}
				else
				{
					system("cls");
					currentScreen = Screen::Exit;
				}
				break;
			}
		}
	}

}

